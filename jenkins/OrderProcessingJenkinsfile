pipeline {
	agent none

	environment {
		DOCKER_HOST_IP = '192.168.1.121'
		NETWORK = 'order-processing-net'
		registryCredential = 'dockerhub'
	    }
stages {
	stage('Cloning Git') {
		agent any
		steps {
			git 'https://github.com/carloselpapa10/order-processing-system.git'
		}
	}
	stage('Buinding application') {
		agent any
		steps {
			script {
				mvn clean install
			}
		}
	}
	stage('Building Image') {
		agent any
		steps {
			sh 'docker build -f customer-service/Dockerfile customer-service/ -t carloselpapa10/customer-service' + ":$BUILD_NUMBER"
		}
	}
  }
}

